<div class="container" id="UserDisplayContainer">
  <h1 class="text-center" style="text-transform: uppercase">WELCOME, {{(playerService.currentPlayer | async)?.username}} !!</h1>
  <br>
  <div class="row">
    <div class="col-md-7 card">
      <h5>Wins: {{(playerService.currentPlayer | async)?.wins}} </h5>
      <h5>Losses: {{(playerService.currentPlayer | async)?.losses}}  </h5>
      <br><br>
      <div class="row">
        <div class="col-md-6 text-center">
          <button type="button" class="btn" (click)="showDialog = !showDialog">User Settings</button>
        </div>
        <div class="col-md-6 text-center">
          <button type="button" class="btn" (click)="authService.logout(); playerService.logoutPlayer()">LOGOUT</button>
        </div>
      </div>
    </div>
    <div class="col-md-5 card">
      <label for="">Search for a Friend</label>
      <input #friendSearch type="text" [ngModel]="friendSearch.value" (ngModelChange)="playerService.findFriends(friendSearch.value, potentialFriends)">
      <ul #potentialFriends>
        <li *ngFor="let friend of playerService.foundPotentialFriends">{{friend.username}}<button class="btn" style="float: right" (click)="playerService.addFriend(friend.key)">Add Friend</button></li>
      </ul>
      <h1>Friends List</h1>
      <div class="card" id="friendCard">
        <div *ngFor="let friend of playerService.localFriends">
          <p>{{(friend | async)?.username}}</p>
          <p>{{(friend | async)?.$key}}</p>
          <input #friendKey type="hidden" value="{{(friend | async)?.$key}}">
          <button type="button" class="btn" (click)="queueService.requestGame(uid, friendKey.value)">Send Game Request</button>
          <hr>
        </div>
      </div>
      <!-- <div *ngFor="let friend of friends">
        <h4>{{friend.name}}</h4>
        <p>{{friend.status}}</p>
      </div> -->
    </div>
  </div>
  <!-- <div class="row columns"> -->
  <!-- <button (click)="login()" *ngIf="!(user | async)?.uid">Anonymous Login</button>
  <button (click)="logout()" *ngIf="(user | async)?.uid">Logout</button> -->
  <div class="row">
    <div class="col-md-12 card">
      <app-chat></app-chat>
    </div>
  </div>
</div>

<app-settings [(visible)]="showDialog">
  <h1>Settings</h1>
  <hr>
  <h3>Change Username</h3>
  <h3>Change Password</h3>
  <h3>Whatever</h3>
  <h4>Put whatever content you want in here</h4>
  <hr>
  <button style="float: right" type="button" class="btn" (click)="showDialog = !showDialog">Close</button>
</app-settings>

<div *ngFor="let request of playerService.ourGameRequests | async">
  <p>{{request.requestor}}</p>
  <p>{{request.requestee}}</p>
  <button type="button" class="btn" (click)="initiateNewGame(request)">Play Game!</button>
</div>
